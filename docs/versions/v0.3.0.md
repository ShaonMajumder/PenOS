# PenOS v0.3.0

Summary
- Introduced a kernel heap carved from a 16 MiB higher-half region. Allocations use a bump pointer and lazily map pages via the bitmap PMM and paging helpers.

Architecture changes
- `heap_init` now part of the boot sequence.
- `kmalloc` aligns allocations, ensures backing pages exist, and advances the heap cursor; `kfree` remains a stub for future freelist work.

Files touched
- `src/mem/heap.c` (new)
- `include/mem/heap.h`
- `src/kernel.c`
- `docs/architecture.md`
- `docs/commits/feature-heap/1_kernel_heap.md`
- `CHANGELOG.md`, `VERSION`, `docs/versions/v0.3.0.md`

Lessons learned
- Paging plus PMM enable simple higher-half heaps without relocations.
- Even a minimal heap dramatically reduces friction for upcoming scheduler/syscall work; documenting limitations keeps future contributors honest.

Next steps
- Implement a freelist in `kfree` or adopt a slab/arena design.
- Put the heap to work by allocating task stacks, IPC buffers, or upcoming filesystem metadata.
